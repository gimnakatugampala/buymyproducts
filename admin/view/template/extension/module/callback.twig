{{ header }}{{ column_left }}
<div id="content">
	<div class="page-header">
		<div class="container-fluid">
			<h1>{{ callback_title }}</h1>
			<ul class="breadcrumb">
				{% for breadcrumb in breadcrumbs %}
				<li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
				{% endfor %}
			</ul>
		</div>
	</div>
	<div class="container-fluid">
		<form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-callback" class="form-horizontal">
			<div class="row">
				<div class="col-sm-12 col-md-8">
					<div class="panel panel-default">
						<div class="panel-heading"><h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3></div>
						<div class="panel-body">
							<ul class="nav nav-tabs" id="apply-tab">
								<li class="active"><a href="#tab-general" data-toggle="tab">{{ tab_general }}</a></li>
								{% if materializeapi %}<li><a href="#tab-materializeapi" data-toggle="tab">{{ text_about_template }}</a></li>{% endif %}
							</ul>
							<div class="tab-content">
								<div class="tab-pane active" id="tab-general">
									<fieldset>
										<legend>{{ text_popup }}</legend>
										<ul class="nav nav-tabs" id="popup-language">
											{% for language in languages %}
											<li><a href="#popup-settings{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
											{% endfor %}
										</ul>
										<div class="tab-content">
											{% for language in languages %}
											<div class="tab-pane fade" id="popup-settings{{ language.language_id }}">
												<div class="form-group required">
													<label class="col-sm-2 control-label">{{ entry_title }}:</label>
													<div class="col-sm-10">
														<input type="text" name="module_callback[{{ language.language_id }}][title]" value="{{ module_callback[language.language_id] ? module_callback[language.language_id].title }}" placeholder="{{ entry_title }}" class="form-control" />
														{% if error_title[language.language_id] %}<div class="text-danger">{{ error_title[language.language_id] }}</div>{% endif %}
													</div>
												</div>
												<div class="form-group required">
													<label class="col-sm-2 control-label">{{ entry_success }}:</label>
													<div class="col-sm-10">
														<input type="text" name="module_callback[{{ language.language_id }}][success]" value="{{ module_callback[language.language_id] ? module_callback[language.language_id].success }}" placeholder="{{ entry_success }}" class="form-control" />
														{% if error_success[language.language_id] %}<div class="text-danger">{{ error_success[language.language_id] }}</div>{% endif %}
													</div>
												</div>
												<div class="form-group required">
													<label class="col-sm-2 control-label">{{ entry_text_button }}:</label>
													<div class="col-sm-10">
														<input type="text" name="module_callback[{{ language.language_id }}][text_button]" value="{{ module_callback[language.language_id] ? module_callback[language.language_id].text_button }}" placeholder="{{ entry_text_button }}" class="form-control" />
														{% if error_text_button[language.language_id] %}<div class="text-danger">{{ error_text_button[language.language_id] }}</div>{% endif %}
													</div>
												</div>
											</div>
											{% endfor %}
										</div>
										<br>
										<div class="form-group">
											<label class="col-sm-2 control-label">{{ entry_fields }}:</label>
											<div class="col-sm-10">
												<table class="table table-striped table-bordered table-hover">
													<thead>
														<tr>
															<td class="text-left" style="width: 70%;">{{ entry_fields }}</td>
															<td class="text-center" style="width: 15%;">{{ entry_status }}</td>
															<td class="text-center" style="width: 15%;">{{ entry_required }}</td>
														</tr>
													</thead>
													<tbody>
														<tr>
															<td class="text-left">{{ text_name }}</td>
															<td class="text-center">
																<div class="checkbox checkbox-primary">
																	{% if module_callback_name %}
																	<input type="checkbox" name="module_callback_name" id="callback-name" class="callback-checkbox styled" value="1" checked="checked" />
																	{% else %}
																	<input type="checkbox" name="module_callback_name" id="callback-name" class="callback-checkbox styled" value="1" />
																	{% endif %}
																	<label for="callback-name"></label>
																</div>
															</td>
															<td class="text-center">
																<div class="checkbox checkbox-primary">
																	{% if module_callback_name_required %}
																	<input type="checkbox" name="module_callback_name_required" id="callback-name-required" class="callback-checkbox styled" value="1" checked="checked" />
																	{% else %}
																	<input type="checkbox" name="module_callback_name_required" id="callback-name-required" class="callback-checkbox styled" value="1" />
																	{% endif %}
																	<label for="callback-name-required"></label>
																</div>
															</td>
														</tr>
														<tr>
															<td class="text-left">{{ text_enquiry }}</td>
															<td class="text-center">
																<div class="checkbox checkbox-primary">
																	{% if module_callback_enquiry %}
																	<input type="checkbox" name="module_callback_enquiry" id="callback-enquiry" class="callback-checkbox styled" value="1" checked="checked" />
																	{% else %}
																	<input type="checkbox" name="module_callback_enquiry" id="callback-enquiry" class="callback-checkbox styled" value="1" />
																	{% endif %}
																	<label for="callback-enquiry"></label>
																</div>
															</td>
															<td class="text-center">
																<div class="checkbox checkbox-primary">
																	{% if module_callback_enquiry_required %}
																	<input type="checkbox" name="module_callback_enquiry_required" id="callback-enquiry-required" class="callback-checkbox styled" value="1" checked="checked" />
																	{% else %}
																	<input type="checkbox" name="module_callback_enquiry_required" id="callback-enquiry-required" class="callback-checkbox styled" value="1" />
																	{% endif %}
																	<label for="callback-enquiry-required"></label>
																</div>
															</td>
														</tr>
														<tr>
															<td class="text-left">{{ text_call_time }}</td>
															<td class="text-center">
																<div class="checkbox checkbox-primary">
																	{% if module_callback_calltime %}
																	<input type="checkbox" name="module_callback_calltime" id="callback-calltime" class="callback-checkbox styled" value="1" checked="checked" />
																	{% else %}
																	<input type="checkbox" name="module_callback_calltime" id="callback-calltime" class="callback-checkbox styled" value="1" />
																	{% endif %}
																	<label for="callback-calltime"></label>
																</div>
															</td>
															<td class="text-center">
																<div class="checkbox checkbox-primary">
																	{% if module_callback_calltime_required %}
																	<input type="checkbox" name="module_callback_calltime_required" id="callback-calltime-required" class="callback-checkbox styled" value="1" checked="checked" />
																	{% else %}
																	<input type="checkbox" name="module_callback_calltime_required" id="callback-calltime-required" class="callback-checkbox styled" value="1" />
																	{% endif %}
																	<label for="callback-calltime-required"></label>
																</div>
															</td>
														</tr>
													</tbody>
												</table>
											</div>
										</div>
									</fieldset>
									<br>
									<fieldset>
										<legend>{{ text_call_action }}</legend>
										<div class="form-group">
											<label class="col-sm-2 control-label" for="callaction-status">{{ entry_status }}:</label>
											<div class="col-sm-10">
												<select name="module_callback_callaction_status" id="callaction-status" class="selectpicker show-tick" data-width="100%">
													{% if module_callback_callaction_status %}
													<option value="1" selected="selected">{{ text_enabled }}</option>
													<option value="0">{{ text_disabled }}</option>
													{% else %}
													<option value="1">{{ text_enabled }}</option>
													<option value="0" selected="selected">{{ text_disabled }}</option>
													{% endif %}
												</select>
											</div>
										</div>
										<ul class="nav nav-tabs callback-settings" id="callaction-language">
											{% for language in languages %}
											<li><a href="#callactions{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
											{% endfor %}
										</ul>
										<div class="tab-content">
											{% for language in languages %}
											<div class="tab-pane fade" id="callactions{{ language.language_id }}">
												<div class="form-group required callback-settings">
													<label class="col-sm-2 control-label">{{ entry_title }}:</label>
													<div class="col-sm-10">
														<input type="text" name="module_callback[{{ language.language_id }}][caption]" value="{{ module_callback[language.language_id] ? module_callback[language.language_id].caption }}" placeholder="{{ entry_title }}" class="form-control" />
														{% if error_caption[language.language_id] %}<div class="text-danger">{{ error_caption[language.language_id] }}</div>{% endif %}
													</div>
												</div>
												<div class="form-group required callback-settings">
													<label class="col-sm-2 control-label">{{ entry_description }}:</label>
													<div class="col-sm-10">
														<textarea name="module_callback[{{ language.language_id }}][description]" placeholder="{{ entry_description }}" class="form-control textarea-resize-vertical">{{ module_callback[language.language_id] ? module_callback[language.language_id].description }}</textarea>
														{% if error_description[language.language_id] %}<div class="text-danger">{{ error_description[language.language_id] }}</div>{% endif %}
													</div>
												</div>
											</div>
											{% endfor %}
										</div>
										<div class="form-group required callback-settings">
											<label class="col-sm-2 control-label" for="module_callback_time"><span data-toggle="tooltip" title="{{ help_time }}">{{ entry_time }}:</span></label>
											<div class="col-sm-10">
												<input type="text" name="module_callback_time" placeholder="{{ entry_time }}" id="module_callback_time" value="{{ module_callback_time }}" class="form-control" />
												{% if error_callback_time %}
												<div class="text-danger">{{ error_callback_time }}</div>
												{% endif %}
											</div>
										</div>
										<div class="form-group callback-settings">
											<label class="col-sm-2 control-label">{{ entry_button_color }}:</label>
											<div class="col-sm-4">
												<select name="module_callback_color_btn" class="selectpicker selectpicker-live-search show-tick">
													{% for color in module_callback_colors %}
													{% if color.name == module_callback_color_btn %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};" selected="selected">{{ color.name }}</option>
													{% else %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};">{{ color.name }}</option>
													{% endif %}
													{% endfor %}
												</select>
												<select name="module_callback_color_btn_text" class="selectpicker selectpicker-live-search show-tick">
													{% for color in module_callback_colors_text %}
													{% if color.name == module_callback_color_btn_text %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};" selected="selected">{{ color.name }}</option>
													{% else %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};">{{ color.name }}</option>
													{% endif %}
													{% endfor %}
												</select>
											</div>
										</div>
										<div class="form-group callback-settings">
											<label class="col-sm-2 control-label">{{ entry_bubble_color }}:</label>
											<div class="col-sm-4">
												<select name="module_callback_color_bubble" class="selectpicker selectpicker-live-search show-tick">
													{% for color in module_callback_colors %}
													{% if color.name == module_callback_color_bubble %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};" selected="selected">{{ color.name }}</option>
													{% else %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};">{{ color.name }}</option>
													{% endif %}
													{% endfor %}
												</select>
												<select name="module_callback_color_bubble_text" class="selectpicker selectpicker-live-search show-tick">
													{% for color in module_callback_colors_text %}
													{% if color.name == module_callback_color_bubble_text %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};" selected="selected">{{ color.name }}</option>
													{% else %}
													<option value="{{ color.name }}" class="{{ color.name }}" style="background: #{{ color.hex }};">{{ color.name }}</option>
													{% endif %}
													{% endfor %}
												</select>
											</div>
										</div>
									</fieldset>
									<br>
									<fieldset>
										<legend>{{ text_settings }}</legend>
										<div class="form-group">
											<label class="col-sm-2 control-label" for="callback-agreement"><span data-toggle="tooltip" title="{{ help_agreement }}">{{ entry_agreement }}:</span></label>
											<div class="col-sm-10">
												<select name="module_callback_agreement" id="callback-agreement" class="selectpicker show-tick" data-width="100%">
													<option value="0">{{ text_none }}</option>
													{% for information in informations %}
													{% if information.information_id == module_callback_agreement %}
													<option value="{{ information.information_id }}" selected="selected">{{ information.title }}</option>
													{% else %}
													<option value="{{ information.information_id }}">{{ information.title }}</option>
													{% endif %}
													{% endfor %}
												</select>
											</div>
										</div>
									</fieldset>
								</div>
								{{ materializeapi }}
							</div>
						</div>
						<div id="footer-appeal-users" class="panel-footer text-center"></div>
					</div>
				</div>
				<div class="col-sm-12 col-md-4">
					<div class="panel panel-default" id="panel-data">
						<div class="panel-heading"><h3 class="panel-title"><i class="fa fa-power-off"></i> {{ entry_status }}</h3></div>
						<div class="panel-body">
							<select name="module_callback_status" id="input-status" class="selectpicker show-tick" data-width="100%">
								{% if module_callback_status %}
								<option value="1" selected="selected" data-icon="fa-toggle-on">{{ text_enabled }}</option>
								<option value="0" data-icon="fa-toggle-off">{{ text_disabled }}</option>
								{% else %}
								<option value="1" data-icon="fa-toggle-on">{{ text_enabled }}</option>
								<option value="0" selected="selected" data-icon="fa-toggle-off">{{ text_disabled }}</option>
								{% endif %}
							</select>
						</div>
						<div class="panel-footer">
							<div class="row">
								<div class="col-sm-6">
									<a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i> {{ button_cancel }}</a>
								</div>
								<div class="col-sm-6 text-right">
									<button type="submit" form="form-callback" title="{{ button_save }}" data-toggle="tooltip" class="btn btn-primary"><i class="fa fa-save"></i> {{ button_save }}</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<input type="hidden" name="module_callback_installed_appeal" value="0">
		</form>
	</div>
</div>
<script type="text/javascript">
	// Open tab
	$('#popup-language a:first').tab('show');
	$('#callaction-language a:first').tab('show');

	var inputStatus = $("#callaction-status"),
		checkboxName = $("#callback-name"),
		checkboxEnquiry = $("#callback-enquiry"),
		checkboxCalltime = $("#callback-calltime"),
		checkboxNameRequired = $("#callback-name-required"),
		checkboxEnquiryRequired = $("#callback-enquiry-required"),
		checkboxCalltimeRequired = $("#callback-calltime-required"),
		callbackCheckbox = $(".callback-checkbox");

	if (checkboxName.prop("checked")) {
		checkboxNameRequired.attr("disabled", false);
	} else {
		checkboxNameRequired.attr("disabled", true);
		checkboxNameRequired.removeAttr("checked");
	}
	if (checkboxEnquiry.prop("checked")) {
		checkboxEnquiryRequired.attr("disabled", false);
	} else {
		checkboxEnquiryRequired.attr("disabled", true);
		checkboxEnquiryRequired.removeAttr("checked");
	}
	if (checkboxCalltime.prop("checked")) {
		checkboxCalltimeRequired.attr("disabled", false);
	} else {
		checkboxCalltimeRequired.attr("disabled", true);
		checkboxCalltimeRequired.removeAttr("checked");
	}

	callbackCheckbox.on("click", function() {
		if (checkboxName.prop("checked")) {
			checkboxNameRequired.attr("disabled", false);
		} else {
			checkboxNameRequired.attr("disabled", true);
			checkboxNameRequired.removeAttr("checked");
		}
		if (checkboxEnquiry.prop("checked")) {
			checkboxEnquiryRequired.attr("disabled", false);
		} else {
			checkboxEnquiryRequired.attr("disabled", true);
			checkboxEnquiryRequired.removeAttr("checked");
		}
		if (checkboxCalltime.prop("checked")) {
			checkboxCalltimeRequired.attr("disabled", false);
		} else {
			checkboxCalltimeRequired.attr("disabled", true);
			checkboxCalltimeRequired.removeAttr("checked");
		}
	});

	if (inputStatus.val() == 0) {$('.callback-settings').hide();}

	inputStatus.change(function(){
		if (inputStatus.val() == 0) {$('.callback-settings').hide();}
		if (inputStatus.val() == 1) {$('.callback-settings').show();}
	});

	// Selectpicker
	$('.selectpicker.selectpicker-live-search').selectpicker({
		size: 10,
		liveSearch: true,
		iconBase: 'fa',
		tickIcon: 'fa-check'
	});

	// Notify
	{% if error_warning %}
	$.notify({
		icon: 'fa fa-exclamation-circle',
		message: '{{ error_warning }}'
	},{
		type: "danger"
	});
	{% endif %}

	{% if error_callback_time %}
	$.notify({
		icon: 'fa fa-exclamation-circle',
		message: '{{ error_callback_time }}'
	},{
		type: "danger"
	});
	{% endif %}

	{% for language in languages %}
		{% if error_title[language.language_id] %}
		$.notify({
			icon: 'fa fa-exclamation-circle',
			message: '{{ error_title[language.language_id] }}'
		},{
			type: "danger"
		});
		{% endif %}
		{% if error_success[language.language_id] %}
		$.notify({
			icon: 'fa fa-exclamation-circle',
			message: '{{ error_success[language.language_id] }}'
		},{
			type: "danger"
		});
		{% endif %}
		{% if error_text_button[language.language_id] %}
		$.notify({
			icon: 'fa fa-exclamation-circle',
			message: '{{ error_text_button[language.language_id] }}'
		},{
			type: "danger"
		});
		{% endif %}
		{% if error_caption[language.language_id] %}
		$.notify({
			icon: 'fa fa-exclamation-circle',
			message: '{{ error_caption[language.language_id] }}'
		},{
			type: "danger"
		});
		{% endif %}
		{% if error_description[language.language_id] %}
		$.notify({
			icon: 'fa fa-exclamation-circle',
			message: '{{ error_description[language.language_id] }}'
		},{
			type: "danger"
		});
		{% endif %}
	{% endfor %}

	$('#footer-appeal-users').load('index.php?route=extension/materialize/appeal/installed/footer&user_token={{ user_token }}');

	{% if module_callback_installed_appeal %}
	$.ajax({
		url: 'index.php?route=extension/materialize/appeal/installed&modal_title={{ callback_title }}&user_token={{ user_token }}',
		dataType: 'html',
		success: function(html) {
			$('#modal-materialize-installed').remove();

			$('body').prepend(html);

			$('#modal-materialize-installed').modal('show');
		},
		error: function(xhr, ajaxOptions, thrownError) {
			alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
		}
	});
	{% endif %}
</script>
{{ footer }}